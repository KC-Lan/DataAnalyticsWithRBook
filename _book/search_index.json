[
["index.html", "資料科學與R語言", " 資料科學與R語言 曾意儒 Yi-Ju Tseng 2017-01-26 長庚大學資訊管理學系大數據分析方法教學使用書籍，內容包括資料擷取、資料清洗與處理、探索式資料分析、資料視覺化與資料探勘，並介紹R與Hadoop EcoSystems介接方法等。 "],
["intro.html", "1 R 101", " 1 R 101 You can label chapter and section titles using {#label} after them, e.g., we can reference Chapter 1. If you do not manually label them, there will be automatic labels anyway, e.g., Chapter ??. Figures and tables with captions will be placed in figure and table environments, respectively. par(mar = c(4, 4, .1, .1)) plot(pressure, type = &#39;b&#39;, pch = 19) Figure 1.1: Here is a nice figure! Reference a figure by its code chunk label with the fig: prefix, e.g., see Figure 1.1. Similarly, you can reference tables generated from knitr::kable(), e.g., see Table 1.1. knitr::kable( head(iris, 20), caption = &#39;Here is a nice table!&#39;, booktabs = TRUE ) Table 1.1: Here is a nice table! Sepal.Length Sepal.Width Petal.Length Petal.Width Species 5.1 3.5 1.4 0.2 setosa 4.9 3.0 1.4 0.2 setosa 4.7 3.2 1.3 0.2 setosa 4.6 3.1 1.5 0.2 setosa 5.0 3.6 1.4 0.2 setosa 5.4 3.9 1.7 0.4 setosa 4.6 3.4 1.4 0.3 setosa 5.0 3.4 1.5 0.2 setosa 4.4 2.9 1.4 0.2 setosa 4.9 3.1 1.5 0.1 setosa 5.4 3.7 1.5 0.2 setosa 4.8 3.4 1.6 0.2 setosa 4.8 3.0 1.4 0.1 setosa 4.3 3.0 1.1 0.1 setosa 5.8 4.0 1.2 0.2 setosa 5.7 4.4 1.5 0.4 setosa 5.4 3.9 1.3 0.4 setosa 5.1 3.5 1.4 0.3 setosa 5.7 3.8 1.7 0.3 setosa 5.1 3.8 1.5 0.3 setosa You can write citations, too. For example, we are using the bookdown package (Xie 2016) in this sample book, which was built on top of R Markdown and knitr (Xie 2015). References "],
["RDataStructure.html", "2 R資料結構", " 2 R資料結構 Here is a review of existing methods. "],
["io.html", "3 資料讀取與匯出 3.1 資料類型 3.2 資料到底在哪裡？ 3.3 讀取各類檔案 3.4 read.csv使用範例 3.5 各類檔案匯出 3.6 讀檔的時候R會自動 3.7 從網路上下載檔案 download.file 3.8 Open Data 3.9 爬蟲", " 3 資料讀取與匯出 What is ‘Data’? http://en.wikipedia.org/wiki/Data Data are values of qualitative or quantitative variables, belonging to a set of items. 看完本章會學到： 找資料、抓資料、總之就是弄到資料 資料前處理原則：tidy 用R做到以上工作 Raw data -&gt; Processing script -&gt; Tidy data -&gt; Data analysis -&gt; Data communication 3.1 資料類型 3.1.1 Tidy Data 一個欄位（Column）內只有一個數值，最好要有凡人看得懂的Column Name 不同的觀察值應該要在不同行（Raw） 一張表裡面，有所有分析需要的資料 如果一定要多張表，中間一定要有index可以把表串起來 One file, one table if (!require(&#39;SportsAnalytics&#39;)){ install.packages(&quot;SportsAnalytics&quot;) library(SportsAnalytics) } NBA1415&lt;-fetch_NBAPlayerStatistics(&quot;14-15&quot;) head(NBA1415) ## League Name Team Position GamesPlayed ## 1 NBA Quincy Acy NYK SF 68 ## 2 NBA Jordan Adams MEM SG 30 ## 3 NBA Steven Adams OKL C 70 ## 4 NBA Jeff Adrien MIN PF 17 ## 5 NBA Arron Afflalo POR SG 78 ## 6 NBA Alexis Ajinca NOR C 68 ## TotalMinutesPlayed FieldGoalsMade ## 1 1288 152 ## 2 249 35 ## 3 1776 217 ## 4 215 19 ## 5 2502 375 ## 6 956 181 ## FieldGoalsAttempted ThreesMade ThreesAttempted ## 1 331 18 60 ## 2 86 10 25 ## 3 399 0 2 ## 4 44 0 0 ## 5 884 118 333 ## 6 328 0 0 ## FreeThrowsMade FreeThrowsAttempted OffensiveRebounds ## 1 76 97 79 ## 2 14 23 9 ## 3 103 205 199 ## 4 22 38 23 ## 5 167 198 27 ## 6 81 99 104 ## TotalRebounds Assists Steals Turnovers Blocks ## 1 301 68 27 60 22 ## 2 28 16 16 14 7 ## 3 522 65 38 99 85 ## 4 77 15 4 9 9 ## 5 247 129 41 116 7 ## 6 315 47 21 69 51 ## PersonalFouls Disqualifications TotalPoints ## 1 147 1 398 ## 2 24 0 94 ## 3 222 3 537 ## 4 30 0 60 ## 5 167 1 1035 ## 6 151 0 443 ## Technicals Ejections FlagrantFouls GamesStarted ## 1 5 0 0 22 ## 2 0 0 0 0 ## 3 3 0 0 67 ## 4 0 0 0 0 ## 5 0 0 0 72 ## 6 1 0 0 8 3.1.2 真實世界裡的Raw Data 3.1.2.1 Html 3.1.2.2 Facebook 3.1.2.3 !? 3.2 資料到底在哪裡？ 硬碟裡 網路下載 Open Data http://data.taipei/ http://data.tycg.gov.tw/ http://data.moi.gov.tw/ 網頁裡（爬蟲！） 任何地方 3.2.1 Open Data http://bit.ly/1U3pVoI 3.3 讀取各類檔案 3.3.1 表格(.csv / Tab分隔 / Excel) read.table, read.csv, 讀取表格資料 The read.table, read.csv 是最常見的，會用這些就好 有以下參數： file, 檔名 header, 是否有欄位名稱（表頭）（T/F） sep, 分隔符號 colClasses, 每一個欄位的類別，用向量表示 comment.char, 把欄位包起來的符號 skip, 要跳過幾行？ stringsAsFactors, 要不要輸入成’Factor’（有序因子） 要安裝xlsx 套件 if (!require(&#39;xlsx&#39;)){ install.packages(&quot;xlsx&quot;) library(xlsx) } ExcelData &lt;- read.xlsx(&quot;data.xlsx&quot;,sheetIndex=1,header=TRUE) head(ExcelData) 3.4 read.csv使用範例 完全不用給參數 data &lt;- read.csv(&#39;open.csv&#39;) data 3.4.1 文字資料 readLines, 逐行讀取文字資料 3.4.2 R檔案格式 load, 讀取已經在R裡面的資料（Ex: iris） 3.4.3 R程式 source, 讀R的Obejct or script, 執行, ASCII (dump的相反) 3.5 各類檔案匯出 寫檔的函數跟讀檔很像： 3.5.1 表格(.csv / Tab分隔) write.table 3.5.2 文字資料 writeLines 3.5.3 R檔案格式 save 3.5.4 R程式 dump 3.6 讀檔的時候R會自動 跳過#開頭的任何行（Row） 判斷要讀幾行 判斷每個列（Column）的類別 把欄位包起來的符號 如果讀取時已指定Column類別以及把欄位包起來的符號，會快很多 initial &lt;- read.csv(&quot;open.csv&quot;, nrows = 100) classes &lt;- sapply(initial, class) tabAll &lt;- read.csv(&quot;open.csv&quot;, colClasses = classes) 3.7 從網路上下載檔案 download.file 使用RCurl Package download.file(URL, destfile=儲存檔名, method=?) method = “curl”–&gt;For https if (!require(&#39;RCurl&#39;)){ install.packages(&quot;RCurl&quot;) library(RCurl) } download.file(&quot;https://raw.githubusercontent.com/yijutseng/BigDataCGUIM/master/files/opendata10401.csv&quot;, destfile = &quot;open.csv&quot;, method = &quot;curl&quot;) 3.8 Open Data 3.9 爬蟲 "],
["manipulation.html", "4 資料處理與清洗 4.1 Example one 4.2 Example two", " 4 資料處理與清洗 Some significant applications are demonstrated in this chapter. 4.1 Example one 4.2 Example two "],
["controlstructure.html", "5 控制流程", " 5 控制流程 We have finished a nice book. "],
["eda.html", "6 探索式資料分析", " 6 探索式資料分析 You can label chapter and section titles using {#label} after them, e.g., we can reference Chapter 1. If you do not manually label them, there will be automatic labels anyway, e.g., Chapter ??. Figures and tables with captions will be placed in figure and table environments, respectively. par(mar = c(4, 4, .1, .1)) plot(pressure, type = &#39;b&#39;, pch = 19) Figure 6.1: Here is a nice figure! Reference a figure by its code chunk label with the fig: prefix, e.g., see Figure 1.1. Similarly, you can reference tables generated from knitr::kable(), e.g., see Table 1.1. knitr::kable( head(iris, 20), caption = &#39;Here is a nice table!&#39;, booktabs = TRUE ) Table 6.1: Here is a nice table! Sepal.Length Sepal.Width Petal.Length Petal.Width Species 5.1 3.5 1.4 0.2 setosa 4.9 3.0 1.4 0.2 setosa 4.7 3.2 1.3 0.2 setosa 4.6 3.1 1.5 0.2 setosa 5.0 3.6 1.4 0.2 setosa 5.4 3.9 1.7 0.4 setosa 4.6 3.4 1.4 0.3 setosa 5.0 3.4 1.5 0.2 setosa 4.4 2.9 1.4 0.2 setosa 4.9 3.1 1.5 0.1 setosa 5.4 3.7 1.5 0.2 setosa 4.8 3.4 1.6 0.2 setosa 4.8 3.0 1.4 0.1 setosa 4.3 3.0 1.1 0.1 setosa 5.8 4.0 1.2 0.2 setosa 5.7 4.4 1.5 0.4 setosa 5.4 3.9 1.3 0.4 setosa 5.1 3.5 1.4 0.3 setosa 5.7 3.8 1.7 0.3 setosa 5.1 3.8 1.5 0.3 setosa You can write citations, too. For example, we are using the bookdown package (Xie 2016) in this sample book, which was built on top of R Markdown and knitr (Xie 2015). References "],
["vis.html", "7 資料視覺化", " 7 資料視覺化 You can label chapter and section titles using {#label} after them, e.g., we can reference Chapter 1. If you do not manually label them, there will be automatic labels anyway, e.g., Chapter ??. Figures and tables with captions will be placed in figure and table environments, respectively. par(mar = c(4, 4, .1, .1)) plot(pressure, type = &#39;b&#39;, pch = 19) Figure 7.1: Here is a nice figure! Reference a figure by its code chunk label with the fig: prefix, e.g., see Figure 1.1. Similarly, you can reference tables generated from knitr::kable(), e.g., see Table 1.1. knitr::kable( head(iris, 20), caption = &#39;Here is a nice table!&#39;, booktabs = TRUE ) Table 7.1: Here is a nice table! Sepal.Length Sepal.Width Petal.Length Petal.Width Species 5.1 3.5 1.4 0.2 setosa 4.9 3.0 1.4 0.2 setosa 4.7 3.2 1.3 0.2 setosa 4.6 3.1 1.5 0.2 setosa 5.0 3.6 1.4 0.2 setosa 5.4 3.9 1.7 0.4 setosa 4.6 3.4 1.4 0.3 setosa 5.0 3.4 1.5 0.2 setosa 4.4 2.9 1.4 0.2 setosa 4.9 3.1 1.5 0.1 setosa 5.4 3.7 1.5 0.2 setosa 4.8 3.4 1.6 0.2 setosa 4.8 3.0 1.4 0.1 setosa 4.3 3.0 1.1 0.1 setosa 5.8 4.0 1.2 0.2 setosa 5.7 4.4 1.5 0.4 setosa 5.4 3.9 1.3 0.4 setosa 5.1 3.5 1.4 0.3 setosa 5.7 3.8 1.7 0.3 setosa 5.1 3.8 1.5 0.3 setosa You can write citations, too. For example, we are using the bookdown package (Xie 2016) in this sample book, which was built on top of R Markdown and knitr (Xie 2015). References "],
["big.html", "8 從小數據到大數據分析 8.1 R + Hadoop 8.2 RHadoop安裝測試流程 (Cloudera) 8.3 RHadoop MapReduce: easy word count 8.4 R + Spark", " 8 從小數據到大數據分析 8.1 R + Hadoop 8.2 RHadoop安裝測試流程 (Cloudera) 安裝與測試日期2016/05/12 8.2.1 系統/軟體版本資訊 Cloudera Hadoop Platform: CDH-5.4.5 下載 R for Linux 3.3.0 安裝說明 RStudio Server 下載 RHadoop (latest version on May 12, 2016) 下載 ravro-1.0.3 plyrmr-0.6.0 rmr-3.3.1 rhdfs-1.0.8 rhbase-1.2.1 8.2.2 參考資料 RHadoop安裝說明文件 RHadoop安裝步驟 Setting persistent environment variable in CentOS 7 issue How to resolve “Permission denied” errors in CDH 8.2.3 安裝步驟 下載Cloudera CDH QuickStart VM Cloudera VM 安裝R 安裝說明 安裝RHadoop RHadoop安裝步驟 安裝RStudio Server 說明 8.2.3.1 Cloudera CDH QuickStart VM Cloudera CDH QuickStart VM是由Cloudera提供的虛擬機器，內涵Linux系統與預載多項Hadoop相關服務，適合想了解Hadoop運作的初學者。 下載VM後，用Virtural Box 開啟即可。 Cloudera CDH QuickStart VM下載處 Virtural Box下載處 以下安裝步驟都在Cloudera CDH QuickStart VM內進行 8.2.3.2 安裝R Cloudera CDH用的Linux作業系統是CentOS 依照安裝說明，需要先安裝Extra Packages for Enterprise Linux (EPEL)，但系統內有預載，所以可以不用按照說明重新下載安裝，直接執行sudo yum install epel-release指令即可 步驟：安裝最新EPRL，更新yum，安裝R。打開Terminal輸入以下指令。 sudo yum install epel-release sudo yum update sudo yum install R 8.2.3.3 安裝RHadoop-1 先進行環境設定 設定HADOOP_CMD與HADOOP_STREAMING兩項環境參數，路徑可能會不同（尤其是HADOOP_STREAMING） 尋找HADOOP_STREAMING路徑方法 find / -name hadoop-streaming-*.jar 設定HADOOP_CMD與HADOOP_STREAMING兩項環境參數，路徑記得換成自己的 echo export HADOOP_CMD=&quot;/usr/bin/hadoop&quot;&gt;/etc/profile.d/hadoopenv.sh echo export HADOOP_STREAMING= &quot;/opt/cloudera/parcels/CDH-5.4.5-1.cdh5.4.5.p0.7/lib/hadoop-mapreduce/ hadoop-streaming-2.6.0-cdh5.4.5.jar&quot; &gt; /etc/profile.d/hadoopenv.sh chmod 0755 /etc/profile.d/hadoopenv.sh 8.2.3.4 安裝RHadoop-2 rmr2 每個Node都要裝 安裝前先至說明檔看需要先安裝哪些其他的packages，Depends 和 Imports 所列的packages都要裝 以下為安裝packages的程式碼，在R內執行（在Terminal輸入R，就能進入R軟體） install.packages(c(&quot;methods&quot;,&quot;Rcpp&quot;, &quot;RJSONIO&quot;, &quot;digest&quot;, &quot;functional&quot;, &quot;reshape2&quot;,&quot;stringr&quot;, &quot;plyr&quot;, &quot;caTools&quot;,&quot;quickcheck&quot;,&quot;testthat&quot;), dependencies=TRUE, repos=&#39;http://cran.rstudio.com/&#39;) 使用q()指令，跳出R軟體 下載rmr2 安裝（請將rmr2_2.3.0.tar.gz替換成剛剛下載的安裝檔路徑） sudo R CMD INSTALL rmr2_2.3.0.tar.gz 8.2.3.5 安裝RHadoop-3 rhdfs 只要裝在會跑R的那個Node 在裝之前，先Check是否有安裝JDK （測試JDK 1.8.0_91沒問題） Check環境變數JAVA_HOME是否有設好 echo $JAVA_HOME 若什麼都沒有回傳，先設定環境變數（將/usr/java/jdk1.8.0_91換成自己的路徑） echo export JAVA_HOME=&quot;/usr/java/jdk1.8.0_91&quot;&gt;/etc/profile.d/jdkenv.sh 為了讓R可以跑JAVA，在Terminal輸入 R CMD javareconf 然後進到R程式（在Terminal輸入R，就能進入R軟體），安裝rJava package install.packages(&quot;rJava&quot;,dependencies=TRUE, repos=&#39;http://cran.rstudio.com/&#39;) 最後跳出R程式，下載rhdfs，安裝rhdfs 將/usr/bin/hadoop換成自己的HADOOP_CMD路徑 rhdfs_1.0.8.tar.gz換成下載的安裝檔路徑） sudo HADOOP_CMD=/usr/bin/hadoop R CMD INSTALL rhdfs_1.0.8.tar.gz 8.2.4 測試前，先解決權限問題 預設hdfs的存取權限不足，所以要打開 將user01改為自己的使用者名稱 sudo -u hdfs hadoop fs -mkdir /user/user01 sudo -u hdfs hadoop fs -chown user01 /user/user01 8.2.5 測試 進入R測試以下程式碼是否能執行 Sys.setenv(HADOOP_CMD=&quot;/usr/bin/hadoop&quot;) Sys.setenv(HADOOP_STREAMING=&quot;/opt/cloudera/parcels/CDH-5.4.5-1.cdh5.4.5.p0.7/lib/hadoop-mapreduce/hadoop-streaming-2.6.0-cdh5.4.5.jar&quot;) library(rmr2) #test mapreduce small.ints = to.dfs(1:100) out&lt;-mapreduce( input = small.ints, map = function(., v) cbind(v, v^2)) head(from.dfs(out)) 8.2.6 安裝RStudio Server 官方下載與安裝說明 在Terminal執行以下程式碼 檔案連結https://download2.rstudio.org/rstudio-server-rhel-0.99.896-x86_64.rpm可能有最新版，請Check官網 wget https://download2.rstudio.org/rstudio-server-rhel-0.99.896-x86_64.rpm sudo yum install --nogpgcheck rstudio-server-rhel-0.99.896-x86_64.rpm 打開瀏覽器，輸入http://localhost:8787/，就能進入RStudio Server了！ 測完收工～ 8.3 RHadoop MapReduce: easy word count Debate&lt;-readLines(&quot;https://raw.githubusercontent.com/yijutseng/BigDataCGUIM/master/RepDebateMiami.txt&quot;) DebateSplit&lt;-unlist(strsplit(tolower(Debate),split = &#39; |\\\\.|\\\\,|\\\\?&#39;)) #table(DebateSplit) DebateSplitDFS = to.dfs(DebateSplit) result = mapreduce( input = DebateSplitDFS, map = function(.,v) keyval(v, 1), reduce = function(k,vv) keyval(k, sum(vv))) head(result) 8.4 R + Spark "],
["author.html", "作者資訊", " 作者資訊 曾意儒 Yi-Ju Tseng 個人網站 數位健康實驗室 長庚大學 資訊管理學系 助理教授 "],
["references.html", "References", " References "]
]
